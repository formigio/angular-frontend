<div class="row">
  <div class="col-lg-12">
    <p *ngIf="invites.length>0">Pending Invitations <span>({{invites.length}})</span> <button type="button" class="btn btn-default btn-sm" (click)="refreshInvites()"><span class="glyphicon glyphicon-refresh"></span></button></p>
    <p *ngIf="invites.length==0">Invite People to Your Team</p>
    <ul class="list-group">
      <li class="list-group-item" *ngFor="let invite of invites" [class.disabled]="invite.changed===true">
        <invite-item [invite]="invite"></invite-item>
      </li>
      <div class="list-group-item" *ngIf="loading">
        <span class="glyphicon glyphicon-cog spinner"></span> Loading...
      </div>
      <li class="list-group-item">
        <form (submit)="addInvite()" class="form">
        <div class="form-group">
          <button class="btn btn-xs btn-primary" type="button" (click)="enableAddForm()" *ngIf="!addFormActive">
              <span class="glyphicon glyphicon-plus"></span>
          </button>
          <button class="btn btn-xs btn-default" type="button" (click)="disableAddForm()" *ngIf="addFormActive">
              <span class="glyphicon glyphicon-minus"></span>
          </button>
          <div class="form-group" *ngIf="addFormActive">
            <input (keyup)="testEmail()" (blur)="testEmail()" (change)="testEmail()" [(ngModel)]="invite.invitee_name" name="email" class="form-control" placeholder="Enter Name or Email Address">
            <div class="alert alert-info"
              *ngIf="invite.invitee_name && !validEmail">
              <div>Not a valid Email Address, but that is ok.</div>
              <small>If you enter an valid email address, then we will send an invitation automatically. If not, you will need to send the link to your teammate separately.</small>
            </div>
            <div class="alert alert-success"
              *ngIf="invite.invitee_name && validEmail">
              <div>Cool, looks like a valid email address, so we can send the invite for you.</div>
              <small>Privacy Note: We don't use this email address for anything but sending the invitation.</small>
            </div>
            <button [disabled]="!invite.invitee_name" type="submit" class="btn btn-primary">
              <span *ngIf="validEmail">Send </span><span *ngIf="!validEmail">Save </span>Invite
            </button>
          </div>
        </div>
        </form>
      </li>
    </ul>
  </div>
</div>
